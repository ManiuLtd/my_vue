webpackJsonp([33],{OLAm:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("Obkc"),i=a("7heI"),o=a("RnxI"),n=a("irLX"),c=a("7m8J"),r=a("vjrR"),d=0,l=0,u={data:function(){return{protocolChecked:!0,productName:"",introduction:"",brandInfo:"",brandInfoIds:"",limitNum:"",specDataList:[],productState:"4",isJionActivity:"1",categoryInfo:{},categoryTxt:"请选择",productLogo:[],productLogoExt:[],productImages:[],productImagesExt:[],responseLogoUrl:[],responseImages:[],attributesInfo:[],attributesContent:[],icon:{normal:"../../static/images/nocheck_out.png",active:"../../static/images/check_out.png"}}},created:function(){n.a.$on("categorySelected",this.getCategory),n.a.$on("getBrand",this.getBrandSelected),n.a.$on("specData",this.getSpecData)},methods:{getisJionActivity:function(t){this.isJionActivity=t},getProductState:function(t){this.productState=t},checkDetailSpec:function(t){var s=this.specDataList[t];n.a.$emit("spec",s),this.$router.push("/spec/"+(t+1))},onProductLogoRead:function(t){var s=t.content;this.productLogo.push(s);var a=t.file.name,e=a.substring(a.lastIndexOf(".")+1).toLowerCase();this.productLogoExt.push(e)},onProductOtherRead:function(t){var s=t.content;this.productImages.push(s);var a=t.file.name,e=a.substring(a.lastIndexOf(".")+1).toLowerCase();this.productImagesExt.push(e)},deleteLogoImage:function(t){this.productLogo.splice(t,1),this.productLogoExt.slice(t,1)},deleteOtherImage:function(t){this.productImages.splice(t,1),this.productImagesExt.slice(t,1)},getSpecData:function(t){if(t){var s=!1;for(var a in this.specDataList)this.specDataList[a].gn_id==t.gn_id&&(this.specDataList[a]=t,s=!0);s||this.specDataList.push(t)}},getCategory:function(t){t&&(this.categoryInfo=t,this.categoryTxt=this.categoryInfo.firLevelName+" "+this.categoryInfo.secLevelName+" "+this.categoryInfo.thiLevelName,this.getAttributeData(this.categoryInfo.firLevelId))},getAttributeData:function(t){var s=this,a=new r.a;a.show(),this.$get(c.b+"?gc_id="+t).then(function(t){200==t.code?(s.attributesInfo=t.data,s.attributesContent=s.attributesInfo.slice(),s.attributesContent.splice(0,1),a.close()):new o.a(t.msg).show()}).then(function(t){a.close()})},getBrandSelected:function(t){if(t){var s=t.brandIds,a=t.brandNames;this.brandInfo=a[0],this.brandInfoIds=s[0]}},saveProduct:function(){var t=this,s=new r.a;s.show();var a={};a.gc_first_id=this.categoryInfo.firLevelId,a.gc_second_id=this.categoryInfo.secLevelId,a.gc_three_id=this.categoryInfo.thiLevelId,a.g_name=this.productName,a.gb_id=this.brandInfoIds,a.g_desc=this.introduction,a.is_join_activity=this.isJionActivity,a.g_order_num=this.limitNum,a.goodsHeadImg=this.responseLogoUrl[0],a.goodsImg=this.responseImages,a.total_attr=this.attributesInfo[0].value,a.g_status=this.productState;for(var e="",i=0;i<this.specDataList.length;i++)e=this.specDataList[i].gn_id+",";a.g_standard=e;for(var n=0;n<this.attributesContent.length;n++){a[this.attributesContent[n].name]=this.attributesContent[n].value}var d=c.d+"/goods/edit_goods/0.html";this.$post(d,a).then(function(a){200==a.code?(t.$router.replace("/addGoodSuccess"),s.close()):new o.a(a.msg).show()}).then(function(t){s.close()})},verification:function(){return 0==this.protocolChecked?(new o.a("请先同意服务协议"),!1):this.productName?this.introduction?this.productLogo?0==this.productImages.length?(new o.a("请添加商品图片").show(),!1):void 0:(new o.a("请添加商品头图").show(),!1):(new o.a("请输入商品描述").show(),!1):(new o.a("请输入商品名称").show(),!1)},uploadImg:function(){0!=this.verification()&&this.postLogoImage(this.productLogoExt[0])},postLogoImage:function(t){var s=this,a=new r.a;a.show(),this.$postImg("http://47.94.152.208:12345/file/upload_.html",{ext:t,content:this.productLogo[d]}).then(function(t){s.responseLogoUrl.push(t.result.url),d<s.productLogo.length?(d+=1,s.postLogoImage(s.productLogoExt[d])):s.productImages&&s.productImages.length>0?s.postOtherImage(s.productImagesExt[0]):s.saveProduct(),a.close()}).then(function(t){a.close()})},postOtherImage:function(t){var s=this,a=new r.a;a.show(),this.$postImg("http://47.94.152.208:12345/file/upload_.html",{ext:t,content:this.productImages[l]}).then(function(t){s.responseImages.push(t.result.url),l<s.productImages.length?(l+=1,s.postOtherImage(s.productImagesExt[l])):s.saveProduct(),a.close()}).then(function(t){a.close()})}},components:{TopHeader:e.a,RadioButton:i.a}},_={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("top-header",{attrs:{"title-txt":"添加商品"}}),t._v(" "),e("div",{staticStyle:{height:"1.61rem"}}),t._v(" "),e("div",{staticClass:"add_header"},[t._m(0),t._v(" "),e("div",{staticClass:"add_box"},[t._m(1),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.productName,expression:"productName",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"输入商品名称"},domProps:{value:t.productName},on:{input:function(s){s.target.composing||(t.productName=s.target.value.trim())},blur:function(s){t.$forceUpdate()}}})]),t._v(" "),e("router-link",{attrs:{to:"/category"}},[e("div",{staticClass:"add_box"},[e("div",{staticClass:"add_content_left"},[e("span",{staticClass:"must"},[t._v("*")]),t._v(" "),e("span",{staticClass:"tips"},[t._v("商品分类")])]),t._v(" "),e("span",[t._v(t._s(t.categoryTxt)),e("img",{attrs:{src:a("/2GB")}})])])]),t._v(" "),e("router-link",{attrs:{to:"/brand"}},[e("div",{staticClass:"add_box"},[e("div",{staticClass:"add_content_left"},[e("span",{staticClass:"must"},[t._v("*")]),t._v(" "),e("span",{staticClass:"tips"},[t._v("商品品牌")])]),t._v(" "),e("span",[t._v(t._s(t.brandInfo)+" "),e("router-link",{attrs:{to:"/brand"}},[e("img",{attrs:{src:a("/2GB")}})])],1)])]),t._v(" "),t._m(2),t._v(" "),e("div",{staticClass:"add_content_bottom"},[e("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.introduction,expression:"introduction",modifiers:{trim:!0}}],attrs:{placeholder:"输入该商品的详细描述"},domProps:{value:t.introduction},on:{input:function(s){s.target.composing||(t.introduction=s.target.value.trim())},blur:function(s){t.$forceUpdate()}}})]),t._v(" "),e("div",{staticClass:"product_logo_box"},[e("div",{staticClass:"add_img_box"},[t._m(3),t._v(" "),e("div",{staticClass:"img_up"},[e("van-uploader",{attrs:{"after-read":t.onProductLogoRead,accept:"image/*",multiple:""}},[e("van-icon",{attrs:{name:"photograph"}})],1)],1),t._v(" "),e("span",{staticClass:"img_tips"},[t._v("图片上传要求：单张图片小于10M此处最多只能添加三张图片。")])]),t._v(" "),e("div",{staticClass:"img_select_box"},t._l(t.productLogo,function(s,i){return e("div",{staticClass:"img_box"},[e("img",{staticClass:"img_delete",attrs:{src:a("UQDv")},on:{click:function(s){t.deleteLogoImage(i)}}}),t._v(" "),e("img",{staticClass:"img_select",attrs:{src:s}})])}))]),t._v(" "),e("div",{staticClass:"product_imgs_box"},[e("div",{staticClass:"add_img_box"},[t._m(4),t._v(" "),e("div",{staticClass:"img_up"},[e("van-uploader",{attrs:{"after-read":t.onProductOtherRead,accept:"image/*",multiple:""}},[e("van-icon",{attrs:{name:"photograph"}})],1)],1),t._v(" "),e("span",{staticClass:"img_tips"},[t._v("图片上传要求：单张图片小于10M此处最多只能添加三张图片。")])]),t._v(" "),e("div",{staticClass:"img_select_box"},t._l(t.productImages,function(s,i){return e("div",{staticClass:"img_box"},[e("img",{staticClass:"img_delete",attrs:{src:a("UQDv")},on:{click:function(s){t.deleteOtherImage(i)}}}),t._v(" "),e("img",{staticClass:"img_select",attrs:{src:s}})])}))]),t._v(" "),e("div",{staticClass:"bar"}),t._v(" "),t._m(5),t._v(" "),t._l(t.attributesContent,function(s,a){return e("div",{staticClass:"attributes_box"},[e("div",{staticClass:"img_content_left"},[e("span",{staticClass:"must"},[t._v("*")]),t._v(" "),e("span",{staticClass:"tips"},[t._v(t._s(s.label))])]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.attributesContent[a].value,expression:"attributesContent[index].value",modifiers:{trim:!0}}],staticClass:"attributes_input",attrs:{type:"text",placeholder:"请输入内容"},domProps:{value:t.attributesContent[a].value},on:{input:function(s){s.target.composing||t.$set(t.attributesContent[a],"value",s.target.value.trim())},blur:function(s){t.$forceUpdate()}}})])}),t._v(" "),e("div",{staticClass:"bar"}),t._v(" "),e("router-link",{attrs:{to:"/specEdit"}},[e("div",{staticClass:"add_box"},[e("div",{staticClass:"add_content_left"},[e("span",{staticClass:"must"},[t._v("*")]),t._v(" "),e("span",{staticClass:"tips"},[t._v("商品规格")])]),t._v(" "),e("span",[t._v("请添加"),e("img",{attrs:{src:a("/2GB")}})])])]),t._v(" "),t._l(t.specDataList,function(s,a){return e("div",{staticClass:"spec_list",on:{click:function(s){t.checkDetailSpec(a)}}},[e("span",{staticClass:"spec_details_name"},[t._v("规格 "+t._s(a+1))]),t._v(" "),t._m(6,!0)])}),t._v(" "),e("div",{staticClass:"bar"}),t._v(" "),e("div",{staticClass:"add_box"},[t._m(7),t._v(" "),e("span",[e("radio-button",{staticStyle:{"margin-right":"1rem"},attrs:{radio_name:"active",radio_title:"参与","is-checked":"true",radio_val:"1"},on:{radioChange:t.getisJionActivity}}),t._v(" "),e("radio-button",{attrs:{radio_name:"active",radio_title:"不参与",radio_val:"2"},on:{radioChange:t.getisJionActivity}})],1)]),t._v(" "),e("div",{staticClass:"add_box"},[t._m(8),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.limitNum,expression:"limitNum",modifiers:{trim:!0}}],attrs:{type:"number",placeholder:"输入限购数量"},domProps:{value:t.limitNum},on:{input:function(s){s.target.composing||(t.limitNum=s.target.value.trim())},blur:function(s){t.$forceUpdate()}}})]),t._v(" "),e("div",{staticClass:"add_box",staticStyle:{border:"none"}},[t._m(9),t._v(" "),e("span",[e("radio-button",{attrs:{radio_name:"g_status",radio_title:"审核通过后，立即自动上架","is-checked":"true"},on:{radioChange:t.getProductState}})],1)]),t._v(" "),e("div",{staticClass:"add_box"},[t._m(10),t._v(" "),e("span",[e("radio-button",{attrs:{radio_name:"g_status",radio_title:"审核通过后，手动操作上架"},on:{radioChange:t.getProductState}})],1)])],2),t._v(" "),e("div",{staticClass:"protocol"},[e("p",{staticClass:"agreement"},[e("van-checkbox",{scopedSlots:t._u([{key:"icon",fn:function(s){return e("img",{attrs:{id:"img_chk",src:s.checked?t.icon.active:t.icon.normal}})}}]),model:{value:t.protocolChecked,callback:function(s){t.protocolChecked="string"==typeof s?s.trim():s},expression:"protocolChecked"}},[t._v("\n        我已经阅读并同意\n        "),e("a",{staticStyle:{color:"#4cc3ad"},attrs:{href:""}},[t._v("《开店服务协议》")])])],1)]),t._v(" "),e("span",{staticClass:"preserve_btn",on:{click:t.uploadImg}},[t._v("确定添加")])],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"header_title"},[s("div",{staticClass:"title_left"},[s("span",{staticClass:"must"},[this._v("*")]),this._v(" "),s("span",[this._v("为必填项")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"add_content_left"},[s("span",{staticClass:"must"},[this._v("*")]),this._v(" "),s("span",{staticClass:"tips"},[this._v("商品名称")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"add_box",staticStyle:{border:"none"}},[s("div",{staticClass:"add_content_left"},[s("span",{staticClass:"must"},[this._v("*")]),this._v(" "),s("span",{staticClass:"tips"},[this._v("商品介绍")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"img_content_left"},[s("span",{staticClass:"must"},[this._v("*")]),this._v(" "),s("span",{staticClass:"tips"},[this._v("商品头图")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"img_content_left"},[s("span",{staticClass:"must"},[this._v("*")]),this._v(" "),s("span",{staticClass:"tips"},[this._v("商品图片")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"add_box"},[s("div",{staticClass:"add_content_left"},[s("span",{staticClass:"tips"},[this._v("商品属性")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"check_spec_box"},[s("span",{staticClass:"check"},[this._v("查看")]),this._v(" "),s("img",{staticClass:"arrow",attrs:{src:a("HI98")}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"add_content_left"},[s("span",{staticClass:"must"},[this._v("*")]),this._v(" "),s("span",{staticClass:"tips"},[this._v("满减活动")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"add_content_left"},[s("span",{staticClass:"tips"},[this._v("单笔订单限购数量")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"add_content_left"},[s("span",{staticClass:"must"},[this._v("*")]),this._v(" "),s("span",{staticClass:"tips"},[this._v("上架状态")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"add_content_left",staticStyle:{visibility:"hidden"}},[s("span",{staticClass:"must"},[this._v("*")]),this._v(" "),s("span",{staticClass:"tips"},[this._v("上架状态")])])}]};var v=a("VU/8")(u,_,!1,function(t){a("aE1M")},"data-v-f5f5127c",null);s.default=v.exports},aE1M:function(t,s){}});
//# sourceMappingURL=33.26a085d5731398cda81d.js.map