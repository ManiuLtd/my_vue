webpackJsonp([30],{FCqA:function(t,s){},NZ7M:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("mvHQ"),i=e.n(a),n=e("//Fk"),o=e.n(n),r=e("7m8J"),c=e("RnxI"),l=e("Obkc"),d=e("vjrR"),m=e("irLX"),p={data:function(){return{storeInfo:{},checked:!0,username:"",idNum:"",bankCardName:"",bankcardNum:"",storeName:"",fileHost:"",logoUploadImages:[],shopUploadImages:[],homeAddress:{},detailsAddress:"",storeAddress:"",lat:"",lng:"",phoneNum:"",icon:{normal:"../../static/images/nocheck_out.png",active:"../../static/images/check_out.png"}}},methods:{getAddressInfo:function(t){this.homeAddress=t},getStoreInfo:function(){var t=this,s=new d.a;s.show(),this.$get(r.v).then(function(e){200==e.code?(t.storeInfo=e.data,s.close()):new c.a(e.msg)}).then(function(t){s.close()})},getStoreAddress:function(){window.erock.getlocation()},getLocationPoiInfo:function(t,s,e){this.storeAddress=t,this.lat=s,this.lng=e},submit:function(){var t=this.logoUploadImages,s=this.shopUploadImages,e=this;new o.a(function(s){if(t){var a=!1;for(var i in t)if(0==t[i].id){a=!0;break}a||s(t);var n=function(a){0==t[a].id&&e.$postImg("http://47.94.152.208:12345/file/upload_.html",{ext:t[a].ext,content:t[a].pd_url}).then(function(e){t[a].pd_url=e.result.url,t[a].id=-100,t.length-1==a&&s(t)})};for(var o in t)n(o)}else s(t)}).then(function(t){return new o.a(function(a,i){if(s){var n=!1;for(var o in s)if(0==s[o].id){n=!0;break}n||a({logo:t,shop:s});var r=function(i){0==s[i].id&&e.$postImg("http://47.94.152.208:12345/file/upload_.html",{ext:s[i].ext,content:s[i].pd_url}).then(function(e){s[i].pd_url=e.result.url,s[i].id=-100,s.length-1==i&&a({logo:t,shop:s})})};for(var c in s)r(c)}else a({logo:t,shop:s})})}).then(function(t){var s=this,a=(t=JSON.parse(i()(t)),new d.a);a.show();var n={};n.partner_name=e.storeName,n.card_no=e.bankcardNum,n.bank_type=e.bankCardName,n.is_agree=1==e.checked?"on":"off",n.provinces=e.homeAddress.provinces,n.city=e.homeAddress.city,n.area=e.homeAddress.area,n.detail_address=e.detailsAddress,n.partner_phone=e.phoneNum,n.partner_lng=this.lng,n.partner_lat=this.lat,n.headImg=t.logo[0].pd_url,n.partnerImg=[],t.shop.forEach(function(t){n.partnerImg.push(t.pd_url)}),e.$post(r.D,n).then(function(t){200==t.code?(new c.a(t.msg).show(),s.$router.replace("/addShopSuccess"),a.close()):new c.a(t.msg).show()}).then(function(t){new c.a(response.msg).show(),a.close()})})},verification:function(){return this.checked?this.bankcardNum?this.storeName?this.homeAddress?this.detailsAddress?this.phoneNum?0==this.logoUploadImages.length?(new c.a("请添加店铺logo").show(),!1):0!=this.shopUploadImages.length||(new c.a("请上传店铺图片").show(),!1):(new c.a("请输入商家电话").show(),!1):(new c.a("请输入详细地址").show(),!1):(new c.a("请输入家庭地址").show(),!1):(new c.a("请输入店铺名称").show(),!1):(new c.a("请输入银行卡号").show(),!1):(new c.a("请先同意服务协议").show(),!1)},onLogoRead:function(t){var s=t.content,e=t.file.name,a=e.substring(e.lastIndexOf(".")+1).toLowerCase();this.logoUploadImages.length<1?this.logoUploadImages.push({ext:a,pd_url:s,id:0}):(this.logoUploadImages.pop(),this.logoUploadImages.push({ext:a,pd_url:s,id:0}))},onShopRead:function(t){if(this.shopUploadImages.length<3){var s=t.content,e=t.file.name,a=e.substring(e.lastIndexOf(".")+1).toLowerCase();this.shopUploadImages.push({ext:a,pd_url:s,id:0})}else new c.a("店铺图片只能添加三张").show()},deleteShopImage:function(t){this.logoUploadImages.splice(t,1)},deleteOtherImage:function(t){this.shopUploadImages.splice(t,1)},uploadImages:function(){0!=this.verification()&&this.submit()},getBankCardInfo:function(){var t=this;this.$post(r.c,{bank_no:this.bankcardNum}).then(function(s){200!=s.code&&new c.a(s.msg).show(),t.bankCardName=s.data.CardName})}},created:function(){m.a.$on("getAddress",this.getAddressInfo),window.getLocationPoiInfo=this.getLocationPoiInfo},mounted:function(){this.getStoreInfo(),this.fileHost="http://ysfq-test.oss-cn-beijing.aliyuncs.com/",console.log(this.fileHost)},components:{TopHeader:l.a}},v={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("top-header",{attrs:{"title-txt":"创建店铺"}}),t._v(" "),a("div",{staticClass:"add_card"},[t._m(0),t._v(" "),a("div",{staticClass:"store_name_box"},[a("span",{staticClass:"tips"},[t._v("商户姓名")]),t._v(" "),a("span",{staticClass:"store_name",domProps:{textContent:t._s(t.storeInfo.truename)}})]),t._v(" "),a("div",{staticClass:"id_num_box"},[a("span",{staticClass:"tips"},[t._v("身份证号")]),t._v(" "),a("span",{staticClass:"id_num",domProps:{textContent:t._s(t.storeInfo.identno)}})]),t._v(" "),a("div",{staticClass:"bank_card_box"},[t._m(1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.bankcardNum,expression:"bankcardNum",modifiers:{trim:!0}}],staticClass:"id_num",attrs:{type:"number",placeholder:"请输入银行卡号"},domProps:{value:t.bankcardNum},on:{blur:[t.getBankCardInfo,function(s){t.$forceUpdate()}],input:function(s){s.target.composing||(t.bankcardNum=s.target.value.trim())}}})]),t._v(" "),a("div",{staticClass:"bank_card_box bank_card_name"},[t._m(2),t._v(" "),a("span",{staticClass:"bank_name",attrs:{type:"text"},domProps:{textContent:t._s(t.bankCardName)}})])]),t._v(" "),a("div",{staticClass:"info"},[t._m(3),t._v(" "),a("div",{staticClass:"store_name_box"},[t._m(4),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.storeName,expression:"storeName",modifiers:{trim:!0}}],staticClass:"store_name",attrs:{type:"text",maxlength:"20",placeholder:"输入(20字以内)店铺名"},domProps:{value:t.storeName},on:{input:function(s){s.target.composing||(t.storeName=s.target.value.trim())},blur:function(s){t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"store_logo_box"},[t._m(5),t._v(" "),a("div",{staticClass:"img_up",staticStyle:{"margin-left":".9rem"}},[a("van-uploader",{attrs:{"after-read":t.onLogoRead,accept:"image/*",multiple:""}},[a("van-icon",{attrs:{name:"photograph"}})],1)],1),t._v(" "),a("span",{staticClass:"img_tips"},[t._v("图片上传要求：单张图片小于10M，此处只能添加一张图片。")])]),t._v(" "),a("div",{staticClass:"img_select_box"},t._l(t.logoUploadImages,function(s,i){return a("div",{staticClass:"img_box"},[a("img",{staticClass:"img_delete",attrs:{src:e("UQDv")},on:{click:function(s){t.deleteShopImage(i)}}}),t._v(" "),a("img",{staticClass:"img_select",attrs:{src:s.id?t.fileHost+s.pd_url:s.pd_url}})])})),t._v(" "),a("div",{staticClass:"store_logo_box store_imgs_box"},[t._m(6),t._v(" "),a("div",{staticClass:"img_up",staticStyle:{"margin-left":"1.3rem"}},[a("van-uploader",{attrs:{"after-read":t.onShopRead,accept:"image/*",multiple:""}},[a("van-icon",{attrs:{name:"photograph"}})],1)],1),t._v(" "),a("span",{staticClass:"img_tips"},[t._v("图片上传要求：单张图片小于10M，此处最多只能添加三张图片。")])]),t._v(" "),a("div",{staticClass:"img_select_box"},t._l(t.shopUploadImages,function(s,i){return a("div",{staticClass:"img_box"},[a("img",{staticClass:"img_delete",attrs:{src:e("UQDv")},on:{click:function(s){t.deleteOtherImage(i)}}}),t._v(" "),a("img",{staticClass:"img_select",attrs:{src:s.id?t.fileHost+s.pd_url:s.pd_url}})])})),t._v(" "),a("router-link",{attrs:{to:"/address"}},[a("div",{staticClass:"address_box"},[a("div",{staticClass:"address_left"},[a("span",{staticClass:"must"},[t._v("*")]),t._v(" "),a("span",{staticClass:"tips"},[t._v("家庭地址")])]),t._v(" "),a("div",{staticClass:"home_address_box"},[a("span",{staticClass:"home_address",domProps:{textContent:t._s(t.homeAddress.name)}}),t._v(" "),a("img",{attrs:{src:e("/2GB")}})])])]),t._v(" "),a("div",{staticClass:"address_box",on:{click:t.getStoreAddress}},[t._m(7),t._v(" "),a("div",{staticClass:"home_address_box"},[a("span",{staticClass:"home_address"},[t._v(t._s(t.storeAddress))]),t._v(" "),a("img",{staticStyle:{"padding-top":"0.25rem"},attrs:{src:e("/2GB")}})])]),t._v(" "),a("div",{staticClass:"detail_address"},[t._m(8),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.detailsAddress,expression:"detailsAddress",modifiers:{trim:!0}}],staticClass:"id_num",attrs:{type:"text",placeholder:"输入详细地址"},domProps:{value:t.detailsAddress},on:{input:function(s){s.target.composing||(t.detailsAddress=s.target.value.trim())},blur:function(s){t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"store_phone"},[t._m(9),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.phoneNum,expression:"phoneNum",modifiers:{trim:!0}}],staticClass:"id_num",attrs:{type:"text",placeholder:"输入商家电话"},domProps:{value:t.phoneNum},on:{input:function(s){s.target.composing||(t.phoneNum=s.target.value.trim())},blur:function(s){t.$forceUpdate()}}})])],1),t._v(" "),a("div",{staticClass:"protocol"},[a("p",{staticClass:"agreement"},[a("van-checkbox",{scopedSlots:t._u([{key:"icon",fn:function(s){return a("img",{attrs:{id:"img_chk",src:s.checked?t.icon.active:t.icon.normal}})}}]),model:{value:t.checked,callback:function(s){t.checked="string"==typeof s?s.trim():s},expression:"checked"}},[t._v("\n        我已经阅读并同意\n        "),a("a",{staticStyle:{color:"#4cc3ad"},attrs:{href:""}},[t._v("《开店服务协议》")])])],1)]),t._v(" "),a("span",{staticClass:"preserve_btn",on:{click:t.uploadImages}},[t._v("保存")])],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"card_title"},[s("div",{attrs:{id:"title_left"}},[s("img",{attrs:{src:e("Ynzr")}}),this._v(" "),s("span",[this._v("商户绑卡")])]),this._v(" "),s("div",{attrs:{id:"title_right"}},[s("span",{staticClass:"must"},[this._v("*")]),this._v(" "),s("span",[this._v("为必填项")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"bank_card_left"},[s("span",{staticClass:"must"},[this._v("*")]),this._v(" "),s("span",{staticClass:"tips"},[this._v("银行卡号")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"bank_card_left"},[s("span",{staticClass:"must"},[this._v("*")]),this._v(" "),s("span",{staticClass:"tips"},[this._v("开户行")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"info_title"},[s("div",{attrs:{id:"info_left"}},[s("img",{attrs:{src:e("Ynzr")}}),this._v(" "),s("span",[this._v("基本信息")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"store_name_left"},[s("span",{staticClass:"must"},[this._v("*")]),this._v(" "),s("span",{staticClass:"tips"},[this._v("店铺名称")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"store_logo_left"},[s("span",{staticClass:"must"},[this._v("*")]),this._v(" "),s("span",{staticClass:"tips"},[this._v("店铺LOGO")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"store_logo_left"},[s("span",{staticClass:"must"},[this._v("*")]),this._v(" "),s("span",{staticClass:"tips"},[this._v("店铺图片")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"address_left"},[s("span",{staticClass:"must"},[this._v("*")]),this._v(" "),s("span",{staticClass:"tips"},[this._v("店铺地址")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"bank_card_left"},[s("span",{staticClass:"must"},[this._v("*")]),this._v(" "),s("span",{staticClass:"tips"},[this._v("详细地址")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"bank_card_left"},[s("span",{staticClass:"must"},[this._v("*")]),this._v(" "),s("span",{staticClass:"tips"},[this._v("商家电话")])])}]};var u=e("VU/8")(p,v,!1,function(t){e("FCqA")},"data-v-1745b0fe",null);s.default=u.exports},Ynzr:function(t,s){t.exports="data:image/png;base64,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"}});
//# sourceMappingURL=30.f5dc271cb40d3110f7d6.js.map